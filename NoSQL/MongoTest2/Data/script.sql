CREATE DATABASE IF NOT EXISTS forum;
USE forum;

CREATE TABLE IF NOT EXISTS Authors (
	id INTEGER AUTO_INCREMENT NOT NULL,
	Name VARCHAR(45) NOT NULL,
	Photo BLOB,

	PRIMARY KEY (id)
) ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS Base (
	id INTEGER AUTO_INCREMENT NOT NULL,
	id_author INTEGER NOT NULL,
	CommentCount INTEGER NOT NULL,
	
	PRIMARY KEY (id),
	FOREIGN KEY(id_author) REFERENCES Authors(id)
) ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS Threads (
	id INTEGER NOT NULL,
	Title VARCHAR(45) NOT NULL,
	
	PRIMARY KEY (id),
	FOREIGN KEY(id) REFERENCES Base(id)
) ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS Comments (
	id INTEGER NOT NULL,
	Text TEXT NOT NULL,
	id_thread INTEGER NOT NULL,
	id_parent INTEGER NOT NULL,
	
	PRIMARY KEY (id),
	FOREIGN KEY(id) REFERENCES Base(id)
) ENGINE = InnoDB;