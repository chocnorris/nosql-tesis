CREATE DATABASE forum;
USE forum;

CREATE TABLE "Authors" (
	id INTEGER AUTO_INCREMENT NOT NULL,
	Name VARCHAR(45) NOT NULL,

	PRIMARY KEY (id)
) ENGINE = InnoDB;

CREATE TABLE "Base" (
	id INTEGER AUTO_INCREMENT NOT NULL,
	id_author INTEGER NOT NULL,
	
	PRIMARY KEY (id),
	FOREIGN KEY(id_author) REFERENCES Authors(id)
) ENGINE = InnoDB;

CREATE TABLE "Threads" (
	id INTEGER NOT NULL,
	Title VARCHAR(45) NOT NULL,
	
	PRIMARY KEY (id),
	FOREIGN KEY(id) REFERENCES Base(id)
) ENGINE = InnoDB;

CREATE TABLE "Comments" (
	id INTEGER NOT NULL,
	Text VARCHAR(45) NOT NULL,
	id_thread INTEGER NOT NULL,
	id_parent INTEGER NOT NULL,
	
	PRIMARY KEY (id),
	FOREIGN KEY(id) REFERENCES Base(id)
) ENGINE = InnoDB;

	CREATE USER 'forum'@'%' IDENTIFIED BY '1234';
	GRANT ALL PRIVILEGES ON forum.* TO 'forum'@'%' WITH GRANT OPTION;

	CREATE USER 'forum'@'localhost' IDENTIFIED BY '1234';
	GRANT ALL PRIVILEGES ON forum.* TO 'forum'@'localhost' WITH GRANT OPTION;

	--SET PASSWORD FOR 'forum'@'%' = PASSWORD('1234');